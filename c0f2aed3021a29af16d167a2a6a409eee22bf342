{
  "comments": [
    {
      "key": {
        "uuid": "25f3ad76_cbb0a9a3",
        "filename": "src/compiler/js-builtin-reducer.cc",
        "patchSetId": 7
      },
      "lineNbr": 1282,
      "author": {
        "id": 1002541
      },
      "writtenOn": "2017-08-11T12:59:13Z",
      "side": 1,
      "message": "To replicate here what https://chromium-review.googlesource.com/c/445006 introduced, I would like to return NoChange() if from_index is not an SMI. Is there a way to tell that (in builtins code I could use CSA::TaggedIsSmi).",
      "range": {
        "startLine": 1282,
        "startChar": 8,
        "endLine": 1282,
        "endChar": 18
      },
      "revId": "c0f2aed3021a29af16d167a2a6a409eee22bf342",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "877e146c_c30b640a",
        "filename": "src/compiler/js-builtin-reducer.cc",
        "patchSetId": 7
      },
      "lineNbr": 1282,
      "author": {
        "id": 1162439
      },
      "writtenOn": "2017-08-11T13:10:57Z",
      "side": 1,
      "message": "AFAIK that\u0027s not possible, as we don\u0027t know anything about the arguments at this point.\n\nWhat you can do is deopt if the argument is not a smi (see [0]), but the compiler folks probably won\u0027t be happy about that. Why not just handle it in the CSA builtin?\n\n[0] https://cs.chromium.org/chromium/src/v8/src/compiler/js-builtin-reducer.cc?l\u003d978\u0026rcl\u003d547d6a869d38e6c08a5d038abd1477530d01f9cc",
      "parentUuid": "25f3ad76_cbb0a9a3",
      "range": {
        "startLine": 1282,
        "startChar": 8,
        "endLine": 1282,
        "endChar": 18
      },
      "revId": "c0f2aed3021a29af16d167a2a6a409eee22bf342",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c041b488_9e8945e7",
        "filename": "src/compiler/js-builtin-reducer.cc",
        "patchSetId": 7
      },
      "lineNbr": 1282,
      "author": {
        "id": 1002541
      },
      "writtenOn": "2017-08-11T14:10:52Z",
      "side": 1,
      "message": "Thanks. I don\u0027t think I want to make compiler folks unhappy. :)\n\nHandling in CSA builtin works fine, but the problem is that I\u0027d have to triplicate that check in the three stubs (currently the check is in the main builtin before it defers to the three stubs). I guess that\u0027s still better than the other options, so I\u0027ll look into that.",
      "parentUuid": "877e146c_c30b640a",
      "range": {
        "startLine": 1282,
        "startChar": 8,
        "endLine": 1282,
        "endChar": 18
      },
      "revId": "c0f2aed3021a29af16d167a2a6a409eee22bf342",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f1b25db_d0e26390",
        "filename": "src/compiler/js-builtin-reducer.cc",
        "patchSetId": 7
      },
      "lineNbr": 1282,
      "author": {
        "id": 1119600
      },
      "writtenOn": "2018-02-09T21:38:47Z",
      "side": 1,
      "message": "This is possible now with the new machinery. You can insert a CheckSmi with a feedback argument. See https://cs.chromium.org/chromium/src/v8/src/compiler/js-call-reducer.cc?rcl\u003dc476c5a5cd243532877f6014a4144ff1db0398cd\u0026l\u003d3367 for an example. The effect of providing the feedback argument is that TurboFan will notice if the deopt happens and learn from it: It will not inline Array#indexOf on that particular call site again.",
      "parentUuid": "c041b488_9e8945e7",
      "range": {
        "startLine": 1282,
        "startChar": 8,
        "endLine": 1282,
        "endChar": 18
      },
      "revId": "c0f2aed3021a29af16d167a2a6a409eee22bf342",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}